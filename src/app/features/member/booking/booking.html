<app-menu-member>
  <div class="booking-container">
    <header class="page-header">
      <h1>‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞</h1>
      <button class="status-btn" routerLink="/BookingStatus">‡∏î‡∏π‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
    </header>

    <div class="tables-grid-wrapper">
      <div class="tables-grid">
        <div
          *ngFor="let table of tables"
          class="table-item"
          [ngClass]="{
            selected: isSelected(table),
            'status-free': table.table_Status === '‡∏ß‡πà‡∏≤‡∏á' && !isSelected(table),
            'status-reserved': table.table_Status === '‡∏ï‡∏¥‡∏î‡∏à‡∏≠‡∏á',
            'status-occupied': table.table_Status === '‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á',
          }"
          (click)="toggleTableSelection(table)"
        >
          <span *ngIf="table.table_Status !== '‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á' && !isSelected(table)">
            {{ table.table_Number }}
          </span>

          <span *ngIf="table.table_Status === '‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á' || isSelected(table)" class="occupied-icon">
            ‚úî
          </span>

          <span class="tooltip-text" *ngIf="table.table_Status === '‡∏ï‡∏¥‡∏î‡∏à‡∏≠‡∏á'"> ‡∏ï‡∏¥‡∏î‡∏à‡∏≠‡∏á </span>
          <span class="tooltip-text" *ngIf="table.table_Status === '‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏á'">
            ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
          </span>
          <span class="tooltip-text" *ngIf="table.table_Status === '‡∏ß‡πà‡∏≤‡∏á'"> ‡∏ß‡πà‡∏≤‡∏á </span>
        </div>
      </div>
    </div>

    <div class="bottom-bar">
      <div class="selected-info">
        <span>‡πÇ‡∏ï‡πä‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</span>
        <h2 class="selected-numbers">{{ getSelectedTableString() }}</h2>
      </div>
      <button class="action-btn" (click)="openBookingModal()">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á</button>
    </div>

    <div class="modal-overlay" *ngIf="showBookingModal">
      <div class="modal-content form-modal">
        <div class="modal-header">
          <h3>‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞</h3>
          <button class="close-btn" (click)="closeBookingModal()">√ó</button>
        </div>

        <div class="modal-body">
          <div class="warning-box">
            <div class="warning-icon">‚ö†Ô∏è</div>
            <p>
              ‡πÇ‡∏õ‡∏£‡∏î‡∏ó‡∏£‡∏≤‡∏ö: ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏°‡∏≤‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 30 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ /
              ‡∏Å‡∏≤‡∏£‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥ <span class="highlight-red">50%</span> ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏Ñ‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
            </p>
          </div>

          <div class="form-group">
            <label>‡πÇ‡∏ï‡πä‡∏∞‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å :</label>
            <div class="selected-display">{{ getSelectedTableString() }}</div>
          </div>

          <div class="form-row">
            <div class="form-group half">
              <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏î‡πá‡∏Å /‡∏Ñ‡∏ô</label>
              <input type="number" [(ngModel)]="bookingForm.NumChildren" placeholder="0" />
            </div>
            <div class="form-group half">
              <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà /‡∏Ñ‡∏ô</label>
              <input type="number" [(ngModel)]="bookingForm.NumAdults" placeholder="0" />
            </div>
          </div>

          <div class="form-group">
            <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≠‡∏á <span class="required">*</span></label>
            <input type="date" [(ngModel)]="bookingForm.BookingDate" />
          </div>

          <div class="form-group">
            <label>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏à‡∏≠‡∏á <span class="required">*</span></label>
            <input type="time" [(ngModel)]="bookingForm.BookingTime" />
          </div>
        </div>

        <div class="modal-footer">
          <button class="confirm-btn" (click)="proceedToPayment()">‡∏à‡∏≠‡∏á/‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥</button>
        </div>
      </div>
    </div>

    <div class="modal-overlay" *ngIf="showPaymentModal">
      <div class="modal-content payment-modal">
        <div class="modal-header">
          <h3 class="blue-text">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡πà‡∏≤‡∏°‡∏±‡∏î‡∏à‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≠‡∏á‡πÇ‡∏ï‡πä‡∏∞</h3>
          <button class="close-btn" (click)="closePaymentModal()">√ó</button>
        </div>

        <div class="modal-body text-center">
          <div class="qr-scan-box">
            <span>üì∑ ‡∏™‡πÅ‡∏Å‡∏ô ‡∏Ñ‡∏¥‡∏ß‡∏≠‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î</span>
            <span class="check-circle">‚úî</span>
          </div>

          <div class="qr-image-container">
            <div class="thai-qr-header">THAI QR PAYMENT</div>
            <div class="prompt-pay">PromptPay</div>
            <img
              src="assets/qr-placeholder.png"
              alt="QR Code"
              class="qr-code-img"
              style="min-height: 150px; background: #eee"
            />
            <div class="ref-name">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</div>
          </div>
        </div>

        <div class="modal-footer">
          <button class="confirm-btn" (click)="confirmPayment()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>
        </div>
      </div>
    </div>
  </div>
</app-menu-member>
